<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head th:replace="index :: head">
	<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}">
</head>

<body class="p-5">
	<div class="ms-5 me-5">
		<div class="card ms-5 me-5">
			<div class="card-body">
				<h1 class="mb-4">Crear Factura</h1>
				<form th:action="@{/formFactura}" th:object="${factura}" method="post">

					<input name="cliente" id="cliente" type="text" th:value="${cliente.id}" readonly="readonly"
						class="form-control" hidden="true" />
					<div class="form-floating mb-3">
						<input name="nombre_cliente" id="nombre_cliente" type="text"
							th:value="${cliente.nombre}+' '+${cliente.apellido}" readonly="readonly"
							class="form-control" />
						<label for="nombre_completo">Nombre Cliente</label>
					</div>

					<div class="form-floating mb-3">
						<input name="descripcion" id="descripcion" type="text" th:field="*{descripcion}"
							class="form-control" />
						<label for="descripcion">Descripción</label>
						<div th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}" class="text-danger"
							style="color: red"></div>
					</div>

					<div class="form-floating mb-3">

						<input name="observacion" id="observacion" type="text" th:field="*{observacion}"
							class="form-control" />
						<label for="observacion">Observacion</label>
						<div th:if="${#fields.hasErrors('observacion')}" th:errors="*{observacion}" class="text-danger"
							style="color: red"></div>
					</div>

					<div class="form-floating mb-3">
						<input name="buscar_libro" id="buscar_libro" type="text" class="form-control" />
						<label for="buscar_libro">Buscar Libro</label>
					</div>
					<h2 class="mb-4">Detalle Factura</h2>
					<div class="mt-3">
						<table th:replace="factura/plantilla_detalle :: itemsFactura"></table>
						<table id="cargarItemLibros" class="table table-bordered">
							<thead>
								<tr>
									<th width="30%">Nombre</th>
									<th width="10%">Precio</th>
									<th width="10%">Cantidad</th>
									<th width="10%">Total</th>
									<th width="15%">Acción</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
						<div class="form-floating" style="display: flex; flex-direction: row;">
							<input type="number" value="0" name="montoTotal" id="monto_total" class="form-control"
								style="width: 30%; font-size: 30px;" readonly="readonly" />
							<label for="montoTotal">Monto Total</label>
						</div>
						<div th:if="${#fields.hasErrors('montoTotal')}" th:errors="*{montoTotal}" class="text-danger"
							style="color: red"></div>
						<div style="display:flex;justify-content: center; padding: 10px;">
							<input type="submit" value="Crear Factura" class="btn btn-primary" />
						</div>
				</form>
			</div>
		</div>
	</div>


	<script src="https://code.jquery.com/jquery-3.2.1.js"
		integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
		integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
		integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
		crossorigin="anonymous"></script>
	<script th:src="@{/js/jquery-ui.min.js}"></script>
	<script th:replace="factura/autocompletar_libro :: autocompletar_libro"></script>
</body>

</html>